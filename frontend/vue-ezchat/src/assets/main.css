* {
  margin: 0;
  padding: 0;
}

/* =========================================
   1. Global Design Tokens (Light Mode)
   ========================================= */
:root {
  /* Premium Brand Colors: Vibrant & Trustworthy */
  --primary: #3b82f6;
  --primary-light: #eff6ff;
  --primary-dark: #2563eb;

  /* Element Plus Light Vars */
  --el-border-color-light: #e2e8f0;

  /* Premium Typography: High Contrast & Cool Tones */
  --text-900: #0f172a;
  /* Slate 900 */
  --text-700: #334155;
  /* Slate 700 */
  --text-500: #64748b;
  /* Slate 500 (Cleaned up from 475569) */
  --text-400: #94a3b8;
  /* Slate 400 */

  /* Premium Surfaces: Airy & Breathable */
  --bg-page: #f8fafc;
  /* Slate 50: Much brighter and cleaner */
  --bg-input: #ffffff;
  /* Pure White: Crisp and standard */
  --bg-card: #ffffff;
  --bg-aside: #ffffff;

  /* Modern Glassmorphism 2.0 */
  --bg-glass: rgba(255, 255, 255, 0.72);
  /* Higher transparency */
  --bg-glass-overlay: rgba(255, 255, 255, 0.60);
  /* Brighter overlays */
  --blur-glass: blur(20px) saturate(180%);
  /* Sharper blur */
  --border-glass: rgba(255, 255, 255, 0.6);
  /* Subtle rim light */

  /* Premium Shadow: Layered Depth with Blue Tint (Not Black) */
  /* Layer 1: Soft ambient | Layer 2: Sharp definition */
  --shadow-glass:
    0 20px 40px -12px rgba(18, 48, 92, 0.12),
    0 2px 8px -2px rgba(18, 48, 92, 0.04);

  --radius-ss: 4px;
  --radius-sm: 8px;
  --radius-base: 12px;
  --radius-md: 16px;
  --radius-lg: 24px;
  --radius-xl: 32px;
  --radius-2xl: 48px;
  --radius-round: 100px;

  --ease-out-expo: cubic-bezier(0.19, 1, 0.22, 1);
}

/* =========================================
   2. Dark Mode Overrides (Neutral Gemini Style)
   ========================================= */
html.dark {
  /* 核心优化：使用更稳重的钴蓝色 */
  --primary: #3b82f6;
  --primary-light: #131314;
  --primary-dark: #2563eb;

  --text-900: #f1f3f4;
  --text-700: #e8eaed;
  --text-500: #9aa0a6;
  --text-400: #70757a;

  --bg-page: #131314;
  --bg-card: #1e1f20;
  --bg-aside: #131314;

  /* Dark Mode Input Background */
  --bg-input: #131314;
  /* Matches card/overlay for seamless look, or #2a2b2e for contrast */

  --bg-glass: rgba(30, 31, 32, 0.75);
  /* 暗黑模式下的局部遮蔽：避免“全黑/全透明”，保持磨砂层次 */
  --bg-glass-overlay: rgba(30, 31, 32, 0.55);
  --blur-glass: blur(24px) saturate(200%);
  --border-glass: rgba(255, 255, 255, 0.06);
  /* Deep shadow from RightCard style */
  --shadow-glass: 0 20px 80px rgba(0, 0, 0, 0.8);

  /* Element Plus Dark Vars */
  --el-bg-color: #131314;
  --el-bg-color-overlay: #1e1f20;
  --el-text-color-primary: #f1f3f4;
  --el-border-color-light: #3c4043;
  --el-fill-color-blank: #131314;
  --el-mask-color: rgba(0, 0, 0, 0.9);
}

body {
  background-color: var(--bg-page);
  color: var(--text-900);
  transition: background-color 0.5s var(--ease-out-expo), color 0.5s var(--ease-out-expo);
  /* Web Font 方案：使用 Noto Sans 确保中日文混排时高度一致、字形大小均匀 */
  /* Noto Sans JP 涵盖大部分汉字，缺字时回退到 Noto Sans SC，两者拥有完全一致的字高和度量信息 */
  font-family: "Noto Sans JP", "Noto Sans SC", sans-serif;
  /* 优化渲染 */
  -webkit-font-smoothing: antialiased;
}

/* =========================================
   3. Global Scrollbar */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-thumb {
  background: rgba(148, 163, 184, 0.2);
  border-radius: var(--radius-round);
}

html.dark ::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.08);
}

/* =========================================
   4. Element Plus Overrides */
.el-message {
  border-radius: var(--radius-round) !important;
  backdrop-filter: var(--blur-glass);
  -webkit-backdrop-filter: var(--blur-glass);
  box-shadow: var(--shadow-glass) !important;
}

html.dark .el-badge__content--danger {
  background-color: #ea4335 !important;
  box-shadow: 0 0 12px rgba(234, 67, 53, 0.2);
}

/* =========================================
   5. View Transitions API (Fade In/Out)
   - Used by dark-mode toggle and language switch (non-error pages)
   ========================================= */
::view-transition-old(root),
::view-transition-new(root) {
  animation-duration: 0.3s;
  animation-timing-function: ease-in-out;
}

/* =========================================
   6. Unified Input and Button Heights
   ========================================= */

/* Unified Input Height (Large Size) */
:deep(.el-input--large .el-input__wrapper),
:deep(.el-form-item .el-input__wrapper[size="large"]) {
  height: 36px !important;
}

/* Global Input Background Override */
/* Global Input Background Override */
/* By overriding the Element Plus variable, we ensure all components (including internal ones)
   use our controlled background color automatically. */
:root {
  --el-input-bg-color: var(--bg-input);
  --el-fill-color-blank: var(--bg-input);
}

/* Also ensure dark mode respects this */
html.dark {
  --el-input-bg-color: var(--bg-input);
  --el-fill-color-blank: var(--bg-input);
}

.el-input__wrapper,
.el-textarea__inner {
  background-color: var(--el-input-bg-color) !important;
  box-shadow: 0 0 0 1px var(--el-border-color-light) inset !important;
}

.el-input__wrapper.is-focus,
.el-textarea__inner:focus {
  box-shadow: 0 0 0 2px rgba(64, 158, 255, 0.2) inset !important;
}

/* Unified Button Height (Primary and Large Buttons) */
.el-button--large,
.el-button[type="primary"]:not(.el-button--small):not(.el-button--mini):not(.el-button--text) {
  height: 44px;
  line-height: 44px;
}

/* Form Action Buttons (Step buttons, Login buttons, etc.) */
.step-btn-full,
.step-btn-half,
.login-btn {
  height: 44px !important;
  line-height: 44px !important;
}

/* =========================================
   7. Global Text Selection Control
   ========================================= */

/* 全局禁用文字选择 */
body,
html {
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
}

/* 允许输入框文字选择 */
.el-input__inner,
.el-textarea__inner,
.rich-editor {
  user-select: text !important;
  -webkit-user-select: text !important;
  -moz-user-select: text !important;
  -ms-user-select: text !important;
}

/* 允许 ID 和代码显示区域文字选择 */
.credential-roomid-value,
/* CreateChatDialog 结果页面的房间ID */
.credential-link-value,
/* CreateChatDialog 结果页面的邀请链接URL */
.room-code,
/* Join 页面的房间ID */
.room-name {
  /* Join 页面的房间名 */
  user-select: text !important;
  -webkit-user-select: text !important;
  -moz-user-select: text !important;
  -ms-user-select: text !important;
}

/* 允许消息内容文字选择 */
.message-text,
/* MessageArea 中的消息文本 */
.message-text-bubble {
  /* 消息气泡，包含文本 */
  user-select: text !important;
  -webkit-user-select: text !important;
  -moz-user-select: text !important;
  -ms-user-select: text !important;
}

/* 注意：PasswordInput 组件已设置 user-select: none 用于安全，保持不变 */

/* =========================================
   8. Global Avatar Styles (Unified Border-Radius)
   ========================================= */

/* Avatar border-radius ratio (30% to match ChatHeader.vue) */
:root {
  --avatar-border-radius-ratio: 0.3;
}

/* Base class for square avatars with proportional border-radius */
.avatar-square {
  --avatar-size: var(--size, 40px);
  /* Default to 40px if --size not set */
  border-radius: calc(var(--avatar-size) * var(--avatar-border-radius-ratio));
}

/* Utility classes for common avatar sizes (optional, for convenience) */
.avatar-square-sm {
  border-radius: calc(40px * var(--avatar-border-radius-ratio));
  /* 12px */
}

.avatar-square-md {
  border-radius: calc(90px * var(--avatar-border-radius-ratio));
  /* 27px */
}

.avatar-square-lg {
  border-radius: calc(150px * var(--avatar-border-radius-ratio));
  /* 45px */
}

/* =========================================
   9. Z-Index Overrides
   ========================================= */
/* Ensure Element Plus Dialogs/Message Boxes appear above the Global Loading Overlay (z-index: 99999) */
.el-overlay {
  z-index: 100000 !important;
}