* {
  margin: 0;
  padding: 0;
}

/* =========================================
   1. Global Design Tokens (Light Mode)
   ========================================= */
:root {
  --primary: #409eff;
  --primary-light: #e0f2fe;
  --primary-dark: #337ecc;

  /* Element Plus Light Vars（用于全局 Spinner 等组件保持一致） */
  --el-border-color-light: #dcdfe6;

  --text-900: #0f172a;
  --text-700: #334155;
  --text-500: #64748b;
  --text-400: #94a3b8;

  --bg-page: #f8fafc;
  --bg-card: #ffffff;
  --bg-aside: #ffffff;

  --bg-glass: rgba(255, 255, 255, 0.65);
  /* 局部遮蔽层（例如 RightAside 的加载遮罩）：比 dialog 更透明，能看出背后内容被磨砂 */
  --bg-glass-overlay: rgba(255, 255, 255, 0.42);
  --blur-glass: blur(24px) saturate(180%);
  --border-glass: rgba(255, 255, 255, 0.5);
  --shadow-glass: 0 12px 40px 0 rgba(31, 38, 135, 0.08);

  --radius-ss: 4px;
  --radius-sm: 8px;
  --radius-base: 12px;
  --radius-md: 16px;
  --radius-lg: 24px;
  --radius-xl: 32px;
  --radius-2xl: 48px;
  --radius-round: 100px;

  --ease-out-expo: cubic-bezier(0.19, 1, 0.22, 1);
}

/* =========================================
   2. Dark Mode Overrides (Neutral Gemini Style)
   ========================================= */
html.dark {
  /* 核心优化：使用更稳重的钴蓝色 */
  --primary: #3b82f6;
  --primary-light: #131314;

  --text-900: #f1f3f4;
  --text-700: #e8eaed;
  --text-500: #9aa0a6;
  --text-400: #70757a;

  --bg-page: #131314;
  --bg-card: #1e1f20;
  --bg-aside: #131314;

  --bg-glass: rgba(30, 31, 32, 0.75);
  /* 暗黑模式下的局部遮蔽：避免“全黑/全透明”，保持磨砂层次 */
  --bg-glass-overlay: rgba(30, 31, 32, 0.55);
  --blur-glass: blur(24px) saturate(200%);
  --border-glass: rgba(255, 255, 255, 0.06);
  --shadow-glass: 0 16px 48px 0 rgba(0, 0, 0, 0.6);

  /* Element Plus Dark Vars */
  --el-bg-color: #131314;
  --el-bg-color-overlay: #1e1f20;
  --el-text-color-primary: #f1f3f4;
  --el-border-color-light: #3c4043;
  --el-fill-color-blank: #131314;
  --el-mask-color: rgba(0, 0, 0, 0.9);
}

body {
  background-color: var(--bg-page);
  color: var(--text-900);
  transition: background-color 0.5s var(--ease-out-expo), color 0.5s var(--ease-out-expo);
  /* Web Font 方案：使用 Noto Sans 确保中日文混排时高度一致、字形大小均匀 */
  /* Noto Sans JP 涵盖大部分汉字，缺字时回退到 Noto Sans SC，两者拥有完全一致的字高和度量信息 */
  font-family: "Noto Sans JP", "Noto Sans SC", sans-serif;
  /* 优化渲染 */
  -webkit-font-smoothing: antialiased;
}

/* =========================================
   3. Global Scrollbar */
::-webkit-scrollbar { width: 6px; height: 6px; }
::-webkit-scrollbar-thumb {
  background: rgba(148, 163, 184, 0.2);
  border-radius: var(--radius-round);
}
html.dark ::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.08);
}

/* =========================================
   4. Element Plus Overrides */
.el-message {
  border-radius: var(--radius-round) !important;
  backdrop-filter: var(--blur-glass);
  -webkit-backdrop-filter: var(--blur-glass);
  box-shadow: var(--shadow-glass) !important;
}

html.dark .el-badge__content--danger {
  background-color: #ea4335 !important;
  box-shadow: 0 0 12px rgba(234, 67, 53, 0.2);
}

/* =========================================
   5. View Transitions API (Fade In/Out)
   - Used by dark-mode toggle and language switch (non-error pages)
   ========================================= */
::view-transition-old(root),
::view-transition-new(root) {
  animation-duration: 0.3s;
  animation-timing-function: ease-in-out;
}

/* =========================================
   6. Unified Input and Button Heights
   ========================================= */

/* Unified Input Height (Large Size) */
:deep(.el-input--large .el-input__wrapper),
:deep(.el-form-item .el-input__wrapper[size="large"]) {
  height: 36px !important;
}

/* Unified Button Height (Primary and Large Buttons) */
.el-button--large,
.el-button[type="primary"]:not(.el-button--small):not(.el-button--mini):not(.el-button--text) {
  height: 44px;
  line-height: 44px;
}

/* Form Action Buttons (Step buttons, Login buttons, etc.) */
.step-btn-full,
.step-btn-half,
.login-btn {
  height: 44px !important;
  line-height: 44px !important;
}

/* =========================================
   7. Global Text Selection Control
   ========================================= */

/* 全局禁用文字选择 */
body,
html {
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
}

/* 允许输入框文字选择 */
.el-input__inner,
.el-textarea__inner,
.rich-editor {
  user-select: text !important;
  -webkit-user-select: text !important;
  -moz-user-select: text !important;
  -ms-user-select: text !important;
}

/* 允许 ID 和代码显示区域文字选择 */
.credential-roomid-value,  /* CreateChatDialog 结果页面的房间ID */
.credential-link-value,    /* CreateChatDialog 结果页面的邀请链接URL */
.room-code,                 /* Join 页面的房间ID */
.room-name {                /* Join 页面的房间名 */
  user-select: text !important;
  -webkit-user-select: text !important;
  -moz-user-select: text !important;
  -ms-user-select: text !important;
}

/* 允许消息内容文字选择 */
.message-text,              /* MessageArea 中的消息文本 */
.message-text-bubble {      /* 消息气泡，包含文本 */
  user-select: text !important;
  -webkit-user-select: text !important;
  -moz-user-select: text !important;
  -ms-user-select: text !important;
}

/* 注意：PasswordInput 组件已设置 user-select: none 用于安全，保持不变 */

/* =========================================
   8. Global Avatar Styles (Unified Border-Radius)
   ========================================= */

/* Avatar border-radius ratio (30% to match ChatHeader.vue) */
:root {
  --avatar-border-radius-ratio: 0.3;
}

/* Base class for square avatars with proportional border-radius */
.avatar-square {
  --avatar-size: var(--size, 40px); /* Default to 40px if --size not set */
  border-radius: calc(var(--avatar-size) * var(--avatar-border-radius-ratio));
}

/* Utility classes for common avatar sizes (optional, for convenience) */
.avatar-square-sm {
  border-radius: calc(40px * var(--avatar-border-radius-ratio)); /* 12px */
}

.avatar-square-md {
  border-radius: calc(90px * var(--avatar-border-radius-ratio)); /* 27px */
}

.avatar-square-lg {
  border-radius: calc(150px * var(--avatar-border-radius-ratio)); /* 45px */
}
